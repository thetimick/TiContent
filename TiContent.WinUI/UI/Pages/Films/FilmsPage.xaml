<Page
    x:Class="TiContent.WinUI.UI.Pages.Films.FilmsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ets="using:TiContent.Entities.ViewModel"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Margin="16">
        <ItemsView ItemsSource="{x:Bind ViewModel.Items}">
            <ItemsView.ItemTemplate>
                <DataTemplate x:DataType="ets:FilmsPageItemEntity">
                    <ItemContainer>
                        <Expander HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch">
                            <Expander.Header>
                                <Grid
                                    Margin="0,16,0,16"
                                    ColumnDefinitions="Auto, *"
                                    ColumnSpacing="16">

                                    <Border Grid.Column="0" CornerRadius="8">
                                        <Image
                                            Width="100"
                                            Height="142"
                                            Source="{x:Bind ImageUrl}"
                                            Stretch="Fill" />
                                    </Border>

                                    <StackPanel Grid.Column="1" Orientation="Vertical">
                                        <TextBlock
                                            IsTextSelectionEnabled="True"
                                            Style="{StaticResource SubtitleTextBlockStyle}"
                                            Text="{x:Bind Title}" />

                                        <TextBlock
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            IsTextSelectionEnabled="True"
                                            Style="{StaticResource BodyTextBlockStyle}"
                                            Text="{x:Bind OriginalTitle}" />

                                        <TextBlock
                                            Margin="0,4,0,0"
                                            Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                            MaxLines="4"
                                            Style="{StaticResource CaptionTextBlockStyle}"
                                            Text="{x:Bind Description}"
                                            TextWrapping="Wrap"
                                            ToolTipService.ToolTip="{x:Bind Description}" />
                                    </StackPanel>
                                </Grid>
                            </Expander.Header>

                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <DropDownButton Content="Открыть" CornerRadius="16">
                                    <DropDownButton.Flyout>
                                        <MenuFlyout Placement="Bottom">
                                            <MenuFlyoutItem Text="Google" />
                                            <MenuFlyoutSeparator />
                                            <MenuFlyoutItem Text="Rutracker" />
                                            <MenuFlyoutItem Text="Rutor" />
                                        </MenuFlyout>
                                    </DropDownButton.Flyout>
                                </DropDownButton>

                                <Button Content="Источники" CornerRadius="16" />
                            </StackPanel>
                        </Expander>
                    </ItemContainer>
                </DataTemplate>
            </ItemsView.ItemTemplate>
        </ItemsView>
    </Grid>
</Page>
